<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CryptoSecure | Polyalphabetic Cipher Demo</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #0c2461 0%, #1e3799 50%, #0c2461 100%);
      color: #fff;
      min-height: 100vh;
      padding: 2rem;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      margin-bottom: 2rem;
      padding: 2rem;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }

    .header h1 {
      font-size: 3rem;
      font-weight: 300;
      margin-bottom: 0.5rem;
      background: linear-gradient(45deg, #4facfe, #00f2fe);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    }

    .header .subtitle {
      font-size: 1.2rem;
      opacity: 0.8;
      font-weight: 300;
    }

    .dashboard {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      margin-bottom: 2rem;
    }

    @media (max-width: 768px) {
      .dashboard {
        grid-template-columns: 1fr;
      }
    }

    .control-panel {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 15px;
      padding: 2rem;
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }

    .info-panel {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 15px;
      padding: 2rem;
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    }

    .panel-title {
      font-size: 1.5rem;
      margin-bottom: 1.5rem;
      color: #4facfe;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .panel-title i {
      font-size: 1.2rem;
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: #00f2fe;
    }

    select, input, textarea {
      width: 100%;
      padding: 1rem;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 10px;
      color: white;
      font-size: 1rem;
      transition: all 0.3s ease;
    }

    select:focus, input:focus, textarea:focus {
      outline: none;
      border-color: #4facfe;
      box-shadow: 0 0 0 2px rgba(79, 172, 254, 0.3);
      background: rgba(255, 255, 255, 0.15);
    }

    select option {
      background: #1e3799;
      color: white;
    }

    .button-group {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      margin-top: 2rem;
    }

    .btn {
      padding: 1rem 2rem;
      border: none;
      border-radius: 10px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .btn-primary {
      background: linear-gradient(45deg, #4facfe, #00f2fe);
      color: white;
      box-shadow: 0 4px 15px rgba(79, 172, 254, 0.4);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(79, 172, 254, 0.6);
    }

    .btn-secondary {
      background: rgba(255, 255, 255, 0.1);
      color: white;
      border: 1px solid rgba(255, 255, 255, 0.3);
    }

    .btn-secondary:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateY(-2px);
    }

    .btn-danger {
      background: linear-gradient(45deg, #ff6b6b, #ee5a52);
      color: white;
    }

    .btn-danger:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
    }

    .result-area {
      margin-top: 2rem;
    }

    .result-box {
      background: rgba(0, 0, 0, 0.3);
      border-radius: 10px;
      padding: 1.5rem;
      border: 1px solid rgba(255, 255, 255, 0.1);
      min-height: 150px;
      font-family: 'Courier New', monospace;
      white-space: pre-wrap;
      overflow-y: auto;
      max-height: 300px;
    }

    .algorithm-cards {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    @media (max-width: 768px) {
      .algorithm-cards {
        grid-template-columns: 1fr;
      }
    }

    .algorithm-card {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      padding: 1.5rem;
      border: 1px solid rgba(255, 255, 255, 0.2);
      transition: transform 0.3s ease;
    }

    .algorithm-card:hover {
      transform: translateY(-5px);
    }

    .algorithm-card h3 {
      color: #4facfe;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .algorithm-card ul {
      list-style: none;
      padding-left: 0;
    }

    .algorithm-card li {
      margin-bottom: 0.5rem;
      padding-left: 1.5rem;
      position: relative;
    }

    .algorithm-card li:before {
      content: "‚ñ∏";
      position: absolute;
      left: 0;
      color: #00f2fe;
    }

    .example-box {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      padding: 1.5rem;
      border-left: 4px solid #00f2fe;
    }

    .example-title {
      color: #00f2fe;
      margin-bottom: 1rem;
      font-weight: 600;
    }

    .example-content {
      font-family: 'Courier New', monospace;
      background: rgba(0, 0, 0, 0.3);
      padding: 1rem;
      border-radius: 8px;
      margin-bottom: 1rem;
    }

    .status-indicator {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-size: 0.9rem;
      margin-top: 1rem;
    }

    .status-online {
      background: rgba(46, 204, 113, 0.2);
      color: #2ecc71;
      border: 1px solid #2ecc71;
    }

    .status-offline {
      background: rgba(231, 76, 60, 0.2);
      color: #e74c3c;
      border: 1px solid #e74c3c;
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
    }

    .status-online .status-dot {
      background: #2ecc71;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.5; }
      100% { opacity: 1; }
    }

    .security-badge {
      display: inline-block;
      background: linear-gradient(45deg, #4facfe, #00f2fe);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
      margin-left: 1rem;
    }

    .footer {
      text-align: center;
      margin-top: 3rem;
      padding: 2rem;
      opacity: 0.7;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üîê CryptoSecure</h1>
      <p class="subtitle">Advanced Polyalphabetic Cipher Demonstration Platform</p>
      <div class="status-indicator status-online">
        <div class="status-dot"></div>
        <span>Backend System: Online</span>
      </div>
    </div>

    <div class="dashboard">
      <div class="control-panel">
        <h2 class="panel-title">‚ö° Encryption Control Center</h2>
        
        <div class="form-group">
          <label for="method">Cipher Algorithm</label>
          <select id="method">
            <option value="traditional">Traditional Vigen√®re Cipher</option>
            <option value="dynamic">Dynamic Key Evolution Cipher</option>
          </select>
        </div>

        <div class="form-group">
          <label for="inputText">Plaintext Input</label>
          <input type="text" id="inputText" placeholder="Enter confidential message...">
        </div>

        <div class="form-group">
          <label for="key">Encryption Key</label>
          <input type="text" id="key" placeholder="Enter secure key...">
        </div>

        <div class="button-group">
          <button class="btn btn-primary" onclick="handleEncrypt()">
            <span>üîí</span> Encrypt Message
          </button>
          <button class="btn btn-primary" onclick="handleDecrypt()">
            <span>üîì</span> Decrypt Message
          </button>
          <button class="btn btn-secondary" onclick="testExample()">
            <span>üß™</span> Run Security Test
          </button>
          <button class="btn btn-danger" onclick="clearAll()">
            <span>üóëÔ∏è</span> Clear All
          </button>
        </div>

        <div class="result-area">
          <label>Secure Output</label>
          <div class="result-box" id="outputText">
Ready for encryption/decryption operations...
          </div>
        </div>
      </div>

      <div class="info-panel">
        <h2 class="panel-title">üìä Algorithm Intelligence</h2>
        
        <div class="algorithm-cards">
          <div class="algorithm-card">
            <h3>Traditional Vigen√®re</h3>
            <ul>
              <li>Fixed key repetition pattern</li>
              <li>Vulnerable to frequency analysis</li>
              <li>Predictable ciphertext patterns</li>
              <li>Historical cryptographic method</li>
            </ul>
            <div class="security-badge">BASIC SECURITY</div>
          </div>
          
          <div class="algorithm-card">
            <h3>Dynamic Cipher</h3>
            <ul>
              <li>Evolving key with each character</li>
              <li>Resists frequency analysis</li>
              <li>No repeating patterns</li>
              <li>Enhanced cryptographic strength</li>
            </ul>
            <div class="security-badge">ADVANCED SECURITY</div>
          </div>
        </div>

        <div class="example-box">
          <div class="example-title">üîç Live Demonstration Example</div>
          <div class="example-content">
Plaintext: ATTACK
Key: LEMON

Traditional: LXFOPV (Pattern Repeats)
Dynamic:    LPEPGU (Unique Output)
          </div>
          <div class="example-content">
Security Analysis:
‚Ä¢ Traditional: Same input ‚Üí Same output ‚ùå
‚Ä¢ Dynamic: Same input ‚Üí Different output ‚úÖ
          </div>
        </div>

        <div style="margin-top: 2rem;">
          <h3 class="panel-title">üî¨ Technical Specifications</h3>
          <div class="example-content">
Encryption: C_i = (P_i + K_i) mod 26
Key Update: K_{i+1} = (K_i + C_i) mod 26
Decryption: P_i = (C_i - K_i + 26) mod 26

Character Set: A-Z (0-25)
Modulo Base: 26
          </div>
        </div>
      </div>
    </div>

    <div class="footer">
      <p>CryptoSecure Demo | Advanced Cryptographic Research Platform</p>
      <p>Built for educational and research purposes</p>
    </div>
  </div>

  <script>
    // Enhanced JavaScript with animations and status updates
    async function handleEncrypt() {
      const method = document.getElementById("method").value;
      const inputText = document.getElementById("inputText").value;
      const key = document.getElementById("key").value;

      if (!inputText) {
        showNotification("Please enter text to encrypt", "warning");
        return;
      }
      
      if (!key) {
        showNotification("Please enter an encryption key", "warning");
        return;
      }

      // Show loading state
      document.getElementById("outputText").textContent = "üîÑ Encrypting... Please wait";
      
      try {
        const response = await fetch("http://127.0.0.1:5000/encrypt_text", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ plaintext: inputText, key: key, method: method }),
        });
        
        if (!response.ok) {
          throw new Error(`Server error: ${response.status}`);
        }
        
        const data = await response.json();
        document.getElementById("outputText").textContent = data.ciphertext || "Error: No ciphertext received";
        showNotification("Encryption completed successfully!", "success");
      } catch (error) {
        console.error("Encryption error:", error);
        document.getElementById("outputText").textContent = "‚ùå Encryption failed! Please ensure the backend server is running on http://127.0.0.1:5000";
        showNotification("Encryption failed - check backend connection", "error");
      }
    }

    async function handleDecrypt() {
      const method = document.getElementById("method").value;
      const inputText = document.getElementById("inputText").value;
      const key = document.getElementById("key").value;

      if (!inputText) {
        showNotification("Please enter text to decrypt", "warning");
        return;
      }
      
      if (!key) {
        showNotification("Please enter a decryption key", "warning");
        return;
      }

      // Show loading state
      document.getElementById("outputText").textContent = "üîÑ Decrypting... Please wait";
      
      try {
        const response = await fetch("http://127.0.0.1:5000/decrypt_text", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ ciphertext: inputText, key: key, method: method }),
        });
        
        if (!response.ok) {
          throw new Error(`Server error: ${response.status}`);
        }
        
        const data = await response.json();
        document.getElementById("outputText").textContent = data.plaintext || "Error: No plaintext received";
        showNotification("Decryption completed successfully!", "success");
      } catch (error) {
        console.error("Decryption error:", error);
        document.getElementById("outputText").textContent = "‚ùå Decryption failed! Please ensure the backend server is running on http://127.0.0.1:5000";
        showNotification("Decryption failed - check backend connection", "error");
      }
    }

    async function testExample() {
      // Pre-fill the example
      document.getElementById("inputText").value = "ATTACK";
      document.getElementById("key").value = "LEMON";
      document.getElementById("method").value = "dynamic";
      
      document.getElementById("outputText").textContent = "üß™ Running security analysis...";
      
      try {
        const response = await fetch("http://127.0.0.1:5000/test_encrypt");
        const data = await response.json();
        
        let output = "üî¨ SECURITY ANALYSIS REPORT\n";
        output += "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n";
        
        output += "TEST SPECIFICATIONS:\n";
        output += `Plaintext: ${data.plaintext}\n`;
        output += `Encryption Key: ${data.key}\n\n`;
        
        output += "ALGORITHM PERFORMANCE:\n";
        output += `Traditional Vigen√®re: ${data.classic_vigenere} ${data.classic_correct ? '‚úÖ PASS' : '‚ùå FAIL'}\n`;
        output += `Dynamic Cipher: ${data.dynamic_cipher} ${data.dynamic_correct ? '‚úÖ PASS' : '‚ùå FAIL'}\n\n`;
        
        output += "PATTERN ANALYSIS:\n";
        output += `Traditional: ${data.repeated_test.classic_pattern_preserved ? 'Repeating patterns detected ‚ùå' : 'No patterns ‚úÖ'}\n`;
        output += `Dynamic: ${data.repeated_test.dynamic_pattern_preserved ? 'No patterns detected ‚úÖ' : 'Patterns detected ‚ùå'}\n\n`;
        
        output += "SECURITY ASSESSMENT:\n";
        output += `Overall Status: ${data.classic_correct && data.dynamic_correct ? 'SECURE IMPLEMENTATION ‚úÖ' : 'SECURITY ISSUES DETECTED ‚ùå'}`;
        
        document.getElementById("outputText").textContent = output;
        showNotification("Security analysis completed", "success");
        
      } catch (error) {
        console.error("Test error:", error);
        document.getElementById("outputText").textContent = "‚ùå Security test failed! Backend connection issue.";
        showNotification("Security test failed", "error");
      }
    }

    function clearAll() {
      document.getElementById("inputText").value = "";
      document.getElementById("key").value = "";
      document.getElementById("outputText").textContent = "Ready for encryption/decryption operations...";
      showNotification("All fields cleared", "info");
    }

    // Notification system
    function showNotification(message, type) {
      // Create notification element
      const notification = document.createElement('div');
      notification.textContent = message;
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 1rem 1.5rem;
        border-radius: 10px;
        color: white;
        font-weight: 600;
        z-index: 1000;
        transform: translateX(100%);
        transition: transform 0.3s ease;
        max-width: 300px;
      `;
      
      // Style based on type
      switch(type) {
        case 'success':
          notification.style.background = 'linear-gradient(45deg, #2ecc71, #27ae60)';
          break;
        case 'error':
          notification.style.background = 'linear-gradient(45deg, #e74c3c, #c0392b)';
          break;
        case 'warning':
          notification.style.background = 'linear-gradient(45deg, #f39c12, #e67e22)';
          break;
        case 'info':
          notification.style.background = 'linear-gradient(45deg, #3498db, #2980b9)';
          break;
      }
      
      document.body.appendChild(notification);
      
      // Animate in
      setTimeout(() => {
        notification.style.transform = 'translateX(0)';
      }, 100);
      
      // Animate out and remove
      setTimeout(() => {
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => {
          document.body.removeChild(notification);
        }, 300);
      }, 3000);
    }

    // Add keyboard shortcuts with visual feedback
    document.addEventListener('keydown', function(event) {
      if (event.ctrlKey && event.key === 'Enter') {
        handleEncrypt();
        showNotification("Encryption triggered (Ctrl+Enter)", "info");
      }
      if (event.ctrlKey && event.shiftKey && event.key === 'Enter') {
        handleDecrypt();
        showNotification("Decryption triggered (Ctrl+Shift+Enter)", "info");
      }
    });

    // Initialize with connection test
    document.addEventListener('DOMContentLoaded', function() {
      showNotification("CryptoSecure Platform Initialized", "success");
      
      // Test backend connection
      fetch("http://127.0.0.1:5000/")
        .then(response => {
          if (response.ok) {
            showNotification("Backend connection established", "success");
          }
        })
        .catch(error => {
          showNotification("Backend connection failed - please start the server", "error");
        });
    });
  </script>
</body>
</html>